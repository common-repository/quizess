(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{188:function(e,t,n){"use strict";function a(){var e=!1;return(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&(e=!0),e}n.d(t,"a",function(){return a})},189:function(e,t,n){"use strict";function a(){return document.querySelector("html, body")}function r(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"u-no-scroll-ios":"u-no-scroll"}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},230:function(e,t,n){var a=n(231),r=n(232),i=n(233);e.exports=function(e){return a(e)||r(e)||i()}},231:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},232:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},233:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},236:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),i=n(10),u=n.n(i),c=n(2),s=n(25),o=n(0),l=n.n(o),m=n(1),d=n(12),h=n.n(d),f=n(188),b=n(230),p=n.n(b);function g(e){var t=e.data.question,n=e.data.answers;return!(!t||!n)&&{name:"question",theme:e.style.theme,direction:e.style.direction,title:e.data.title,question:t,answers:n,explanationText:e.data.explanationText,explanationType:e.data.explanationType,explanationMedia:e.data.explanationMedia}}var E=function(e){var t=[],n=e.blocks,a=e.bgOptions,r=e.options;return n.forEach(function(e){var n;switch(e.name){case"category":(n=function(e){var t=e.questions,n=e.style,a=e.category;return t.map(function(e,t){var r=e.data;return r.title=a,g({data:r,style:n})}).filter(function(e){return!1!==e})}(e)).length>0&&t.push.apply(t,p()(n));break;case"question":(n=g(e))&&t.push(n)}}),{options:r,bgOptions:a,questions:t}},v=n(189),S=n(84),q=n.n(S),O=n(85);function j(){return(j=q()(regeneratorRuntime.mark(function e(t){var n,a,r,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=userLogged,a=n.nonce,r=quizessOptions,i=r.quizApi,u={method:"GET",mode:"same-origin",credentials:"same-origin",headers:{Accept:"application/json"},redirect:"follow",referrer:"no-referrer"},a&&(u.headers["X-WP-Nonce"]=a),e.abrupt("return",Object(O.c)("".concat(i).concat(t),u).then(function(e){return e.json()}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(){return(y=q()(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=userLogged,a=n.scoresApi,e.abrupt("return",Object(O.e)(a,t).then(function(e){return e.json()}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var R=l.a.createContext(),w=function(e){var t=e.theme,n=e.userSubmit,a=e.headerElement,r=userLogged,i=r.userPlayer,u=r.singleSubmit,c=Object(o.useMemo)(v.a,[]),s=Object(o.useMemo)(f.a,[]),m=Object(o.useMemo)(function(){return"1"===u||!1},[]),d=Object(o.useMemo)(function(){return"1"===n&&"yes"===i||!1},[]),b=Object(o.useState)(!1),p=h()(b,2),g=p[0],S=p[1],q=Object(o.useState)(!0),O=h()(q,2),w=O[0],_=O[1],x=Object(o.useState)(!1),C=h()(x,2),A=C[0],z=C[1],T=Object(o.useState)({}),M=h()(T,2),N=M[0],k=M[1],I=Object(o.useState)(!1),L=h()(I,2),P=L[0],D=L[1],F=Object(o.useState)(!1),Q=h()(F,2),$=Q[0],H=Q[1],J=Object(o.useState)(!1),Y=h()(J,2),G=Y[0],U=Y[1],W=Object(o.useState)(!1),X=h()(W,2),B=X[0],K=X[1],V=Object(o.useState)([]),Z=h()(V,2),ee=Z[0],te=Z[1],ne=Object(o.useState)(0),ae=h()(ne,2),re=ae[0],ie=ae[1],ue=Object(o.useState)(0),ce=h()(ue,2),se=ce[0],oe=ce[1],le=Object(o.useState)({id:0,correct:!1}),me=h()(le,2),de=me[0],he=me[1],fe=Object(o.useState)(0),be=h()(fe,2),pe=be[0],ge=be[1],Ee=Object(o.useState)(!1),ve=h()(Ee,2),Se=ve[0],qe=ve[1],Oe=Object(o.useState)(!1),je=h()(Oe,2),ye=je[0],Re=je[1],we=Object(o.useState)(!1),_e=h()(we,2),xe=_e[0],Ce=_e[1],Ae=Object(o.useState)(!1),ze=h()(Ae,2),Te=ze[0],Me=ze[1],Ne=Object(o.useState)(!1),ke=h()(Ne,2),Ie=ke[0],Le=ke[1],Pe=Object(o.useState)(!1),De=h()(Pe,2),Fe=De[0],Qe=De[1],$e=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])for(var t=0;t<re;t++)ee[t]||(ee[t]={id:-1,correct:!1});(function(e){return y.apply(this,arguments)})({id:e.quizId,stats:ee,total:re,correct:pe}).then(function(e){Qe(function(){return e}),Le(function(){return!0}),Me(function(){return!0}),Ce(function(){return!0})}).catch(function(e){Qe(function(){return e}),Me(function(){return!0}),Le(function(){return!1})})},He=function(e){g&&d&&!xe&&$e(!0)},Je=function(){a.classList.add("is-hidden"),setTimeout(function(){c.classList.add(Object(v.b)(s))},300)},Ye=function(){z(function(){return!0}),function(e){return j.apply(this,arguments)}(e.quizId).then(function(e){var t=E(e);ie(function(){return t.questions.length}),k(function(){return t}),_(function(){return"2"===e.shouldPlay}),D(function(){return!0}),z(function(){return!1})})},Ge=function(e){e&&(D(function(){return!1}),K(function(){return!1}),setTimeout(function(){c.classList.remove(Object(v.b)(s)),a.classList.remove("is-hidden")},300)),H(function(){return!1}),U(function(){return!1}),te(function(){return[]}),oe(function(){return 0}),ge(function(){return 0}),qe(function(){return!1}),Re(function(){return!1}),he(function(){return{id:0,correct:!1}})},Ue=function(e){e&&he(function(){return 0!==de.id?de:{id:-1,correct:!1}}),H(function(){return!0}),U(function(){return!1}),te(function(){return ee.concat(de)}),ge(function(){return de.correct?pe+1:pe}),qe(function(){return!0}),Re(function(){return!0})},We={handleStart:function(){0===Object.entries(N).length&&N.constructor===Object?(Ye(),Je(),S(function(){return!0})):(D(function(){return!0}),Je())},handleClose:function(){d&&!xe&&$e(!0),Ge(!0)},handleCancelClose:function(){K(function(){return!1})},handleShowExit:function(){K(function(){return!0})},handleOnStop:function(){$||Ue(!0)},handleAnswerChange:function(e,t){he(function(){return{id:e,correct:t}})},handleSubmitChange:function(){$?(oe(function(){return se+1}),U(function(){return!1}),H(function(){return!1}),qe(function(){return!1}),Re(function(){return!1}),he(function(){return{id:0,correct:!1}})):Ue()},handleExplanationChange:function(){U(function(){return!G})},handleTryAgain:function(){Ge()},handleSubmitScore:function(){d&&$e()},handleResetMessage:function(){Me(function(){return!1})}};return Object(o.useEffect)(function(){return window.addEventListener("beforeunload",He),function(){window.removeEventListener("beforeunload",He)}},[]),l.a.createElement(R.Provider,{value:{values:{inProgress:A,data:N,modal:P,theme:t,correctAnswers:pe,questionStats:ee,currentQuestion:se,questionsTotal:re,selectedAnswer:de,showExplanation:G,submitedAnswer:$,stopTimer:Se,playTimer:ye,showExit:B,scoresSubmited:xe,showMessage:Te,message:Fe,successMessage:Ie,shouldSubmit:d,singleSubmit:m,shoudNotPlay:w},dataStore:We}},e.children)},_=n(8),x=n.n(_),C=n(18),A=function(e){var t=e.children,n=Object(o.useContext)(R),a=n.values,r=a.showExit,i=a.modal,u=a.shouldSubmit,c=a.shoudNotPlay,s=a.scoresSubmited,l=a.data,d=l.options.theme,h=l.bgOptions,f=h.bgColor,b=h.bgUrl,p=n.dataStore,g=p.handleShowExit,E=p.handleCancelClose,v=p.handleClose,S={backgroundColor:f||!1,backgroundImage:!!b&&"url(".concat(b,")")},q=x()("modal",i?"is-active":"is-inactive"),O=x()("modal__inner","modal__inner--".concat(d),r?"modal__inner--wide":"modal__inner--narrow");return c?React.createElement("div",{className:q,style:S},React.createElement("div",{className:O},React.createElement(C.m,{type:"info"},Object(m.__)("Your scores have been submitted, thank you for playing.","quizess")))):r?React.createElement("div",{className:q,style:S},React.createElement("div",{className:O},React.createElement(C.n,{theme:d,shouldSubmit:u,scoresSubmited:s,handleCancelClose:E,handleClose:v}))):React.createElement("div",{className:q,style:S},React.createElement("div",{className:O},React.createElement(C.u,{theme:d,closeCallback:g}),React.createElement("div",{className:"modal__content"},t)))},z=function(e){var t=e.title,n=Object(o.useContext)(R),a=n.values,r=a.questionsTotal,i=a.currentQuestion,u=a.stopTimer,c=a.playTimer,s=a.theme,l=a.data.options.timer,d=n.dataStore.handleOnStop,h=React.createElement("div",{className:"question__title"},t);return React.createElement("div",{className:"question__header"},React.createElement("div",{className:"question__timer"},React.createElement(C.s,{disabled:null===l||!1,endTime:l,onEnd:d,stop:u,play:c,theme:s})),t&&h,React.createElement("div",{className:"question__number"},Object(m.__)("Question","quizess"),": ",i+1," / ",r))},T=function(e){var t=e.questionData,n=t.answers,a=t.direction,r=t.question,i=t.theme,u=t.title,c=Object(o.useContext)(R),s=c.values,l=s.selectedAnswer,m=s.submitedAnswer,d=c.dataStore.handleAnswerChange,h=n.map(function(e,t){var n=e.correct,a=e.text,r=t+1===l.id?1:0,u=m?n?2:3:1;return React.createElement(C.a,{key:t,onClick:!m&&d,correct:n,theme:i,number:t+1,state:r?u:0},a)});return React.createElement(o.Fragment,null,React.createElement(z,{title:u}),React.createElement(C.h,null,r),React.createElement(C.b,{rows:a},h))},M=function(e){var t=e.type,n=e.text,a=e.media,r=Object(o.useContext)(R).values,i=r.selectedAnswer,u=r.data.options,s=u.failureMessage,l=u.successMessage,m=i.correct,d=m?l:s,h=m?"success":"fail",f=React.createElement(c.RawHTML,{className:"quiz__explanation"},n),b=React.createElement(C.f,{type:t,media:a});return React.createElement(o.Fragment,null,React.createElement(c.RawHTML,{className:"quiz__message quiz__message--".concat(h)},d),n&&f,t&&a&&b)},N=function(e){var t=e.questionData,n=t.answers,a=t.question,r=t.explanationMedia,i=t.explanationText,u=t.explanationType,c=e.questionData,s=Object(o.useContext)(R),l=s.values,d=l.data.options.theme,h=l.showExplanation,f=l.selectedAnswer.id,b=l.submitedAnswer,p=s.dataStore,g=p.handleSubmitChange,E=p.handleExplanationChange;if(!n||!a)return React.createElement(C.m,{type:"warning"},Object(m.__)("This question is incomplete","quizess"));var v=!(!r&&!i),S=React.createElement(C.v,{theme:d,onClick:E,disabled:!1,featured:!0},h?Object(m.__)("Hide Expplanation","quizess"):Object(m.__)("Show Expplanation","quizess")),q=b?Object(m.__)("Next Question","quizess"):Object(m.__)("Submit","quizess"),O=React.createElement(T,{questionData:c}),j=React.createElement(M,{type:u,text:i,media:r}),y=h?j:O;return React.createElement(o.Fragment,null,y,React.createElement("div",{className:"modal__footer"},b&&v&&S,React.createElement(C.v,{theme:d,onClick:g,disabled:0===f||!1,featured:!1},q)))},k=function(){var e=Object(o.useContext)(R),t=e.values,n=t.currentQuestion,a=t.questionsTotal,r=t.questionStats,i=t.correctAnswers,u=t.scoresSubmited,c=t.singleSubmit,s=t.showMessage,l=t.message,d=t.successMessage,h=t.data,f=h.questions,b=h.options.theme,p=e.dataStore,g=p.handleTryAgain,E=p.handleSubmitScore,v=p.handleResetMessage;return Array.isArray(f)&&f.length?n+1>a?(u||E(),React.createElement(o.Fragment,null,React.createElement(C.k,{theme:b,onClick:g,questionsTotal:a,correctAnswers:i,questionStats:r,playOnce:u&&c}),React.createElement(C.p,{showMessage:s,message:l,successMessage:d,handleResetMessage:v}))):React.createElement(N,{questionData:f[n]}):React.createElement(C.m,{type:"warning"},Object(m.__)("Nothing to see here, this quiz has no questions !!!","quizess"))},I=function(){var e=Object(o.useContext)(R),t=e.values,n=t.data,a=t.theme,r=t.shoudNotPlay,i=e.dataStore.handleStart,u=React.createElement(C.m,{type:"info"},Object(m.__)("Your scores have been submitted, thank you for playing.","quizess")),c=React.createElement(A,null,r?u:React.createElement(k,null));return React.createElement(o.Fragment,null,React.createElement(C.c,{theme:a,onClick:i},Object(m.__)("Start","quizess")),Object.entries(n).length>0&&c)},L=function(e){var t=e.theme,n=e.quizId,a=e.userSubmit,r=e.headerElement;return React.createElement(w,{theme:t,quizId:n,userSubmit:a,headerElement:r},React.createElement(I,null))};n.d(t,"App",function(){return P});var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".js-quiz-start";r()(this,e),this.quizId=-1,this.userSubmit=!1,this.theme=null,this.$appElement=document.querySelector(t),this.quizId=this.$appElement.dataset.quizId,this.userSubmit=this.$appElement.dataset.userSubmit,this.theme=this.$appElement.dataset.theme,this.headerElement=document.querySelector(".js-quizess-header")}return u()(e,[{key:"init",value:function(){Object(s.render)(React.createElement(L,{theme:this.theme,quizId:this.quizId,userSubmit:this.userSubmit,headerElement:this.headerElement}),this.$appElement)}}]),e}()}}]);